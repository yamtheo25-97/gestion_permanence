<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Administration - Programme de permanence</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="dashboard-body">
    <div class="app-shell">
        <!-- BOUTON HAMBURGER -->
        <button class="hamburger-btn" id="hamburgerBtn" onclick="toggleSidebar()">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <aside class="sidebar collapsed" id="sidebar">
            <h3>Administration</h3>
            <a href="{{ url_for('admin') }}">Gestion des personnes</a>
            <a href="{{ url_for('add_person') }}">Ajouter une personne</a>
            <a href="{{ url_for('update_hours') }}">Modifier les heures</a>
            <a href="{{ url_for('logout') }}">Déconnexion</a>
        </aside>

        <div class="main-content">
            <header class="dashboard-header">
                <h1>Administration - Programme de permanence</h1>
                <p>Connecté en tant que <strong>{{ prenom }} {{ nom }}</strong> (Administrateur)</p>
            </header>

            <main class="dashboard-main">
                <h2>Liste des personnes dans le programme</h2>
                
                {% if personnes and personnes|length > 0 %}
                    <table class="permanences-table">
                        <thead>
                            <tr>
                                <th>Prénom</th>
                                <th>Nom</th>
                                <th>Groupe</th>
                                <th>Guérite</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for p in personnes %}
                            <tr>
                                <td>{{ p.prenom }}</td>
                                <td>{{ p.nom }}</td>
                                <td>{{ p.groupe }}</td>
                                <td>{{ p.guerite }}</td>
                                <td>
                                    <a href="{{ url_for('delete_person', prenom=p.prenom, nom=p.nom) }}" 
                                       onclick="return confirm('Êtes-vous sûr de vouloir supprimer {{ p.prenom }} {{ p.nom }} ?')"
                                       style="color: #ff4444; text-decoration: none; padding: 5px 10px; border: 1px solid #ff4444; border-radius: 3px;">
                                        Supprimer
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="no-permanence">
                        Aucune personne dans le programme.
                    </p>
                {% endif %}
            </main>
        </div>
    </div>

    <script>
        // Fonction pour basculer la sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const hamburgerBtn = document.getElementById('hamburgerBtn');
            
            sidebar.classList.toggle('collapsed');
            hamburgerBtn.classList.toggle('active');
        }
        
        // Fermer la sidebar en cliquant à l'extérieur
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const hamburgerBtn = document.getElementById('hamburgerBtn');
            
            if (!sidebar.contains(event.target) && !hamburgerBtn.contains(event.target)) {
                if (sidebar.classList.contains('collapsed')) {
                    toggleSidebar();
                }
            }
        });
    </script>
</body>
</html>
